<html>
  <head>
    <title>{{ dormFriendlyName }}</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.1/font/bootstrap-icons.css">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.umass.edu/sites/default/files/favicons/favicon-32x32.png">
    <style> 
    .bg {
        background-image: linear-gradient(rgba(0, 0, 0, 0.527),rgba(0, 0, 0, 0.5)),url("{{ dormImage }}");
        background-position: center;
        background-size: cover;
        /*margin:0px;*/
        height:100vh;
        margin-top: 0px;
        background-attachment: fixed;
        display:flex;
        
    }
    .row {
        margin-left: 0;
        margin-right: 0;
    }
    #dorm-name {
      margin:0px;
      color:white;
    }
    #dorm-name-container {
      margin-top: 0rem;
      padding-top:36vh;
    }
    .dis-container{
      padding-left: 1rem;
    }
    #reviews-container {
      margin-top: 1rem;
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    @media (max-width: 600px) {
     p {
        font-size: 0.8rem !important;
     }
    }
    .fade-in {
  opacity: 0.00;
	-webkit-transition: 1s all ease-in-out;
	-moz-transition: 1s all ease-in-out;
	-o-transition:1s all ease-in-out;
	transition: 1s all ease-in-out;
}

.fade-in.active {
	opacity: 1.00;
}
    </style>
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg fixed-top"
      id="mainNav"
    >
      <div class="container">
        <a class="navbar-brand display-6 fw-bolder" href="/">UMass Dorms</a>
        <span id = "dorm-name" class="navbar-brand display-6" hidden>You are browsing {{ dormFriendlyName }}</span>
        </button>
      </div>
    </nav>
    <header class="bg">
      <div class="container text-end" id="dorm-name-container">
        <h1 class="fw-bold display-1 "style="color:white;">{{dormFriendlyName}}
          <h1 class="display-1"style="color:white;"> Residential</h1>
        </h1>
      </div>
      <div class="container text-start" style = "padding-top:35vh">
        <div class="dis-container border-light border-start border-4 rounded-3"></class>
          {% for line in dormDis.split("\n") %}
            <p class="lead" style="color:white">{{line}}</p>
          {% endfor %}
        </div>
      </div>
    </header>
    <!--div class = "text-center" style="margin-top: 10px;">
      <i class="bi bi-arrow-down fs-2 mb-3" >Scroll to Browse Reviews</i>
    </div-->
    <section id="reviews-container">
      <button type="button" id = "review-button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" style="background-color: rgba(136, 28, 28,0.9); border-color:rgba(136, 28, 28,0.9);height: 60;">
        Write a Review!
      </button>
      
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Write a Review</h5>
            </div>
            <div class="modal-body">
              <form action="/addReview" met
              d = "post" enctype="multipart/form-data">
              <!--Email-->
              <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="Your UMass Email" aria-label="UMass Email" aria-describedby="basic-addon2" id="email-input" name="email" required>
                <span class="input-group-text" id="basic-addon1">@umass.edu</span>
              </div>
              <!--Name-->
              <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="Your Name" aria-label="Name" aria-describedby="basic-addon2" id="name-input" name = "name" required>
              </div>
              <!--Area and Hall-->
              <div class="input-group mb-3">
                <select class="form-select" aria-label="Select Residential area" id="area-input" name="area" required>
                  <option selected disabled>Residential Area</option>
                  <option id="northeast" value="northeast">Northeast</option>
                  <option id = "central" value="central">Central</option>
                  <option id = "ohill" value="ohill">Orchard Hill</option>
                  <option id = "southwest" value="southwest">Southwest</option>
                  <option id = "honors" value="honors">Commonwealth Honors College</option>
                  <option id = "sylvan" value="sylvan">Sylvan</option>
                </select>
                <input type="text" class="form-control" placeholder ="Your Residential Hall" aria-label="Hall" id="hall-input" name="hall" required>
              </div>
              <!--Rating-->
              <p style="margin-bottom: 1rem;">Rate your experience from 1 to 5:</p>
              <div class="form-check form-check-inline" style="margin-bottom: 1rem;">
                <input class="form-check-input" type="radio" name="rating" id="inlineRadio1" value="1" required>
                <label class="form-check-label" for="inlineRadio1">1</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="rating" id="inlineRadio2" value="2" required>
                <label class="form-check-label" for="inlineRadio2">2</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="rating" id="inlineRadio3" value="3" required>
                <label class="form-check-label" for="inlineRadio1">3</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="rating" id="inlineRadio4" value="4" required>
                <label class="form-check-label" for="inlineRadio2">4</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="rating" id="inlineRadio5" value="5" required>
                <label class="form-check-label" for="inlineRadio2">5</label>
              </div>
              <!--Comments-->  
              <div class="input-group mb-3">
                <span class="input-group-text">Comments</span>
                <textarea class="form-control" aria-label="Comments" name = "comment"></textarea>
              </div>
              <p>Upload pictures of your room!</p>
              <!--Image Upload-->
              <div class="input-group mb-3">
                <input type="file" class="form-control" id="inputGroupFile01" name="photo" accept="image/png, image/jpeg">
                <!--label class="input-group-text" for="inputGroupFile01">Upload</!--label-->
              </div>
            
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type = "submit" class="btn btn-primary" style="background-color:rgba(136, 28, 28,0.9); border-color:rgba(136, 28, 28,0.9);">Submit Review</button>
            </div>
          </form>
          </div>
        </div>
    </div>
    </section>
    <section style="display:flex;justify-content:center;align-items: center;flex-direction: column;" id="review-container">
      {% for key,value in globalData.items() %}
      {% if value.area == dormName %}
      <div class= "border border-4 border-light rounded-2" style="margin-left: 10rem; margin-right: 10rem; margin-top: 3rem; padding-bottom: 1rem;display:flex;flex-direction: column;align-items: center;width: 60vw;">
        <div class="d-flex w-70 justify-content-between" style=" margin-top: 2rem; margin-bottom: 1rem;">
          <h5 class="mb-1">{{value.hall}}</h5>
        </div>
        <p class="mb-1" style="margin-left: 2rem; padding-bottom: 1rem; margin-right: 2rem">{{value.comment}}</p>
        <small style="margin-left: 2rem; margin-right: 2rem;padding-bottom: 1rem;">{{value.rating}}/5</small>
        <div>
        {% for x in range(value.rating) %}
        <i class="bi-star-fill" style="color: #FFD700;"></i>
        {% endfor %}
        {% for x in range(5-value.rating) %}
        <i class="bi-star" style="color: #FFD700;"></i>
        {% endfor %}
        </div>
        {% if value.photoType == "image/jpeg" or value.photoType == "image/png" %}
        <img src = "/photo/{{key}}">
        {% endif %}
        
      </div>  
      {% endif %}
      {% endfor %}
    </section>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
     <script>
      window.addEventListener("scroll", (event) => {
      let scrollY = this.scrollY;
      let scrollX = this.scrollX;
      if (scrollY > 80) {
        document.getElementById("dorm-name").hidden = false;
      } else {
        document.getElementById("dorm-name").hidden = true;
      }
      if (scrollY > 75) {
          document.querySelector("#review-button").classList.add("active")
        } else {
          document.querySelector("#review-button").classList.remove("active")
          //document.querySelectorAll(".fade-in").forEach((elem)=>{elem.classList.remove("active")});
        }
      console.log(scrollY);
      if (scrollY > 250) {
        document.querySelector("#review-container").classList.add("active")
      } else {
        document.querySelector("#review-container").classList.remove("active")
      }});
      if (window.location.toString().endsWith("submitted=true")) {
        alert("Thanks for submitting a review")
        window.location = window.location.toString().replace("?submitted=true", "")
      } else if (window.location.toString().endsWith("submitted=false")) {
        alert("There was an error submitting your review, please check if email and name are valid")
        window.location = window.location.toString().replace("?submitted=false", "")
      }
      
      function verifyReview() {
        var inputs = [];
        
        
      }
      function readRating() {
        
      }
    </script>
  <footer>
      <p class="py-1 text-center text-black">Made with ❤️ @ HackUMass 2022</p>
  </footer>
    </body>
</html>
